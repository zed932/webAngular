<div class="app-list-container">
  <header class="tester-header glass-effect">
    <h1>–ü–∞–Ω–µ–ª—å —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∞</h1>
    <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.</p>
  </header>

  <div class="apps-list">
    @for (app of filteredApps(); track app.id) {
      <div
        class="app-item glass-effect"
        [class.expanded]="isExpanded(app.id)">

        <div class="app-header" (click)="toggleAppDetails(app.id)">
          <div class="app-basic-info">
            <span class="app-icon">{{ app.icon || 'üì±' }}</span>
            <div class="app-title">
              <h3>{{ app.name }}</h3>
              <span class="app-version">v{{ app.version || '1.0.0' }}</span>
            </div>
          </div>
          <div class="app-actions">
            <span class="expand-icon">
              {{ isExpanded(app.id) ? '‚ñº' : '‚ñ∂' }}
            </span>
          </div>
        </div>

        @if (isExpanded(app.id)) {
          <div class="app-details">
            <div class="detail-section">
              <h4>üì± –û–ø–∏—Å–∞–Ω–∏–µ</h4>
              <p>{{ app.description }}</p>
            </div>

            <div class="detail-section">
              <h4>üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</h4>
              <div class="tech-stack">
                @for (tech of (app.techStack || []); track tech) {
                  <span class="tech-tag">{{ tech }}</span>
                }
              </div>
            </div>

            <div class="detail-section">
              <h4>‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è</h4>
              <div class="requirements">
                <p><strong>–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è iOS:</strong> {{ app.minIOSVersion || 'iOS 15.0' }}</p>
                <p><strong>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ macOS:</strong> {{ app.supportsMacOS ? '‚úÖ –î–∞' : '‚ùå –ù–µ—Ç' }}</p>
              </div>
            </div>

            <div class="detail-section">
              <h4>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h4>
              <div class="app-stats">
                <div class="stat-item">
                  <span class="stat-label">–°–∫–∞—á–∏–≤–∞–Ω–∏–π:</span>
                  <span class="stat-value">{{ app.downloadCount || 0 }}</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">–†–µ–π—Ç–∏–Ω–≥:</span>
                  <span class="stat-value">
                    @for (star of [1,2,3,4,5]; track star) {
                      <span class="star" [class.filled]="star <= (app.rating || 0)">‚òÖ</span>
                    }
                  </span>
                </div>
              </div>
            </div>
          </div>
        }
      </div>
    }
    @empty {
      <div class="empty-state glass-effect">
        <p>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
      </div>
    }
  </div>
</div>
